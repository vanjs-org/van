(()=>{var e,t,l,a=Object,n=Object.getPrototypeOf,d=(e,t,l,a)=>(e??(setTimeout(l,a),new Set)).add(t),o={get val(){return this._val},set val(e){let l=this,a=l._val;e!==a&&(l.oldVal===a?t=d(t,l,f):e===l.oldVal&&t.delete(l),l._val=e,l.listeners.forEach((t=>t(e,a))))},onnew(e){this.listeners.push(e)}},r=n(o),i=e=>e.nodeType?e:new Text(e),s=(e,...t)=>(t.flat(1/0).forEach((t=>e.appendChild(n(t)===o?h(t,(e=>e)):i(t)))),e),c=new Proxy(((t,...l)=>{let[d,...i]=n(l[0]??0)===r?l:[{},...l],c=document.createElement(t);return a.entries(d).forEach((([t,l])=>{let a=c[t]!==e?e=>c[t]=e:e=>c.setAttribute(t,e);n(l)===o?h(l,(e=>(a(e),c))):n(l)===r?h(...l.deps,((...e)=>(a(l.f(...e)),c))):a(l)})),s(c,...i)}),{get:(t,l)=>t.bind(e,l)}),p=e=>e.bindings=e.bindings.filter((e=>e.dom?.isConnected)),f=()=>{let l=[...t];t=e,new Set(l.flatMap(p)).forEach((t=>{let{_deps:l,dom:a,func:n}=t,d=n(...l.map((e=>e._val)),a,...l.map((e=>e.oldVal)));d!==a&&(d!=e?a.replaceWith(t.dom=i(d)):(a.remove(),t.dom=e))})),l.forEach((e=>e.oldVal=e._val))},h=(...t)=>{let[a]=t.splice(-1,1),n=a(...t.map((e=>e._val)));if(n==e)return[];let o={_deps:t,dom:i(n),func:a};return t.forEach((t=>{l=d(l,t,(()=>(l.forEach(p),l=e)),1e3),t.bindings.push(o)})),o.dom},m={add:s,tags:c,state:e=>({__proto__:o,_val:e,oldVal:e,bindings:[],listeners:[]}),bind:h};window.van=m})();